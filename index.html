<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LivingWell Brussels – Client Intake & Consent Form</title>
  <style>
    :root{
      --accent:#568273;
      --accent-dark:#46695e;
      --bg:#f4f4f4;
      --card:#fff;
      --muted:#888;
      --error:#b00020;
    }
    html,body{height:100%}
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: #222;
      background-color: var(--bg);
      margin: 0;
      padding: 0 12px;
      -webkit-font-smoothing:antialiased;
    }
    .container {
      max-width: 860px;
      margin: 30px auto;
      background-color: var(--card);
      padding: 28px;
      border-radius: 10px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.06);
    }
    .header {text-align:center;margin-bottom:18px}
    .header img{
      width:100%;
      height:auto;
      margin-bottom:8px;
      display:block;
    }
    h1{color:var(--accent);margin:0 0 6px;font-size:22px}
    p.intro{font-size:15px;line-height:1.6;margin:8px 0 18px}
    fieldset{
      border:1px solid #e6e6e6;border-radius:8px;margin-bottom:20px;padding:16px;background:#fbfbfb
    }
    legend{font-weight:700;color:var(--accent);padding:0 6px}
    .form-row{display:flex;gap:12px;flex-wrap:wrap}
    label{display:block;font-weight:600;margin:8px 0 6px}
    input[type="text"],input[type="email"],input[type="tel"],input[type="date"],textarea,select{
      width:100%;padding:9px;border:1px solid #cfcfcf;border-radius:6px;font:inherit;box-sizing:border-box
    }
    textarea{min-height:88px;resize:vertical}
    .small{width:140px}
    .checkbox-group,label.inline{font-weight:400;display:inline-flex;align-items:center;gap:6px;margin-right:12px}
    .submit-btn{
      display:inline-flex;align-items:center;gap:10px;background:var(--accent);color:#fff;padding:12px 20px;border-radius:8px;border:0;cursor:pointer;font-size:16px
    }
    .submit-btn[disabled]{opacity:.6;cursor:not-allowed}
    footer{text-align:center;font-size:12px;color:var(--muted);margin-top:22px;padding-top:12px;border-top:1px solid #eee}
    .visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
    .note{font-size:13px;color:#444;margin:6px 0}
    #confirmation{display:none;color:green;text-align:center;margin-bottom:12px}
    .error{color:var(--error);font-size:13px}
    @media(min-width:700px){.two{flex:1 1 48%}.three{flex:1 1 30%}}
  </style>
</head>
<body>
  <main class="container" role="main">
    <div class="header">
      <img src="https://ci3.googleusercontent.com/meips/ADKq_NbcJB0x06AMVppaL3gDOndsz27qOoYAiOt2raVfA7d2Mime2j7hQJTeV4KqhmiNVlBdLO2zJvb6OYSrQLd1znicD984OzKJcydmZWq3l8kZD2eJyWSdkDXfv5XP9_yUmNWm8gnWFCI1k7tRrVbpcg=d-e1-ft" alt="LivingWell logo">
      <h1>Client Intake & Consent Form</h1>
      <p class="note">LivingWell Brussels – Chaussée d'Etterbeek 64, 1040 Bruxelles – contact@livingwell.be</p>
    </div>

    <!-- UPDATED INTRO TEXT -->
    <p class="intro">
      LivingWell is a non-profit holistic wellness centre dedicated to providing safe, respectful, and inclusive care.
      The information you share helps us tailor sessions to your needs and ensure your well-being.
      Please complete this form before your first appointment.
    </p>

    <p id="confirmation" role="status" aria-live="polite">Thank you! Your form has been successfully submitted.</p>

    <form id="clientForm" action="https://script.google.com/macros/s/AKfycbzkq-pAuTJ-Ayc8N1EN2fMvXKTWUAZZER-Fead9SlmU7akQ-sB_28UqkbATBBBa6VjL/exec" method="POST" novalidate>

      <!-- 1. Personal Information -->
      <fieldset>
        <legend>1. Personal Information</legend>

        <div class="form-row">
          <div class="two">
            <label for="full_name">Full name <span class="error">*</span></label>
            <input id="full_name" name="full_name" type="text" required autocomplete="name" placeholder="First Last">
          </div>

          <div class="small">
            <label for="dob">Date of birth <span class="error">*</span></label>
            <input id="dob" name="dob" type="date" required max="">
          </div>
        </div>

        <label for="address">Address</label>
        <input id="address" name="address" type="text">

        <div class="form-row">
          <div class="three">
            <label for="postal_code">Postal code</label>
            <input id="postal_code" name="postal_code" type="text" pattern="[A-Za-z0-9\s\-]{2,10}">
          </div>

          <div class="three">
            <label for="city">City</label>
            <input id="city" name="city" type="text">
          </div>

          <div class="three">
            <label for="phone">Phone number</label>
            <input id="phone" name="phone" type="tel" placeholder="+32 123 456 789">
          </div>
        </div>

        <label for="email">Email address</label>
        <input id="email" name="email" type="email" placeholder="name@example.com">

        <label>Preferred contact method (select all that apply)</label>
        <div class="checkbox-group">
          <label class="inline"><input type="checkbox" name="contact_method" value="Email"> Email</label>
          <label class="inline"><input type="checkbox" name="contact_method" value="Phone"> Phone</label>
          <label class="inline"><input type="checkbox" name="contact_method" value="SMS"> SMS</label>
        </div>
      </fieldset>

      <!-- 2. Health Information -->
      <fieldset>
        <legend>2. Health Information</legend>

        <label>Have you had any recent injuries, surgeries, or medical treatments we should be aware of?</label>
        <div role="radiogroup">
          <label class="inline"><input type="radio" name="recent_injuries" value="Yes"> Yes</label>
          <label class="inline"><input type="radio" name="recent_injuries" value="No" checked> No</label>
        </div>

        <label for="injury_details">If yes, please specify</label>
        <input id="injury_details" name="injury_details" type="text">

        <label>Health conditions (check all that apply)</label>
        <div class="checkbox-group">
          <label class="inline"><input type="checkbox" name="conditions" value="Blood pressure concerns"> Blood pressure concerns (high or low)</label>
          <label class="inline"><input type="checkbox" name="conditions" value="Heart-related conditions"> Heart-related conditions</label>
          <label class="inline"><input type="checkbox" name="conditions" value="Diabetes"> Diabetes</label>
          <label class="inline"><input type="checkbox" name="conditions" value="Skin sensitivities"> Skin sensitivities or conditions</label>
          <label class="inline"><input type="checkbox" name="conditions" value="Circulation concerns"> Circulation concerns</label>
          <label class="inline"><input type="checkbox" name="conditions" value="Arthritis or joint issues"> Arthritis or joint issues</label>

          <label>Pregnancy (if applicable):</label>
          <label class="inline"><input type="checkbox" name="conditions" value="Pregnancy">
            <input name="trimester" type="text" placeholder="trimester" style="width:72px;margin-left:8px">
          </label>

          <label>Allergies:</label>
          <label class="inline"><input type="checkbox" name="conditions" value="Allergies">
            <input id="allergies" name="allergies" type="text" placeholder="e.g. oils, nuts" style="width:160px;margin-left:8px">
          </label>

          <label class="inline">Other:
            <input type="checkbox" name="conditions" value="Other">
            <input id="other_conditions" name="other_conditions" type="text" placeholder="specify" style="width:140px;margin-left:8px">
          </label>
        </div>

        <label>Are you currently taking any medications or supplements?</label>
        <div role="radiogroup">
          <label class="inline"><input type="radio" name="medications" value="Yes"> Yes</label>
          <label class="inline"><input type="radio" name="medications" value="No" checked> No</label>
        </div>

        <label for="medications_details">If yes, please specify</label>
        <input id="medications_details" name="medications_details" type="text">

        <label>Have you received professional massage/bodywork before?</label>
        <div role="radiogroup">
          <label class="inline"><input type="radio" name="massage_experience" value="Yes"> Yes</label>
          <label class="inline"><input type="radio" name="massage_experience" value="No" checked> No</label>
        </div>
      </fieldset>

      <!-- 3. Service Selection -->
      <fieldset>
        <legend>3. Service Selection</legend>
        <div class="checkbox-group">
          <label class="inline"><input type="checkbox" name="service" value="Localised Chair Massage"> Localised Chair Massage</label>
          <label class="inline"><input type="checkbox" name="service" value="Localised Massage with Oils"> Localised Massage with Oils</label>
          <label class="inline"><input type="checkbox" name="service" value="Aromatherapy Massage"> Aromatherapy Massage</label>
          <label class="inline"><input type="checkbox" name="service" value="Maderotherapy Massage"> Maderotherapy Massage</label>
          <label class="inline"><input type="checkbox" name="service" value="Free 10-minute Quick Relief Massage"> Free 10-minute Quick Relief Massage</label>
        </div>
      </fieldset>

      <!-- 4. Consent -->
      <fieldset>
        <legend>4. Consent & Acknowledgement</legend>
        <p class="note">
          <strong>Nature of Service:</strong> I understand services are non-medical and complementary.<br>
          <strong>Health Disclosure:</strong> I confirm my information is accurate and will notify practitioners of changes.<br>
          <strong>Privacy & GDPR:</strong> Data stored securely for 7 years. Requests for access, correction, or deletion can be sent to contact@livingwell.be.<br>
          <strong>Touch Consent:</strong> I understand massage involves physical touch.<br>
          <strong>Liability Waiver:</strong> LivingWell is not responsible for adverse reactions if information is incomplete.
        </p>

        <label class="inline">
          <input type="checkbox" id="gdpr_consent" name="gdpr_consent" required>
          I consent to the processing of my personal data in accordance with the privacy policy. <span class="error">*</span>
        </label>
      </fieldset>

      <!-- 5. House Rules -->
      <fieldset>
        <legend>5. House Rules</legend>
        <p class="note">
          1. <strong>Purpose of Services:</strong> All services are non-medical.<br>
          2. <strong>Registration & Identification:</strong> Clients must register; ID may be required.<br>
          3. <strong>Personal Belongings:</strong> LivingWell is not responsible for lost items.<br>
          4. <strong>Hygiene:</strong> Shower before treatments; avoid lotions and oils beforehand.<br>
          5. <strong>Smoking/Vaping:</strong> Not permitted on premises.<br>
          6. <strong>Alcohol/Substances:</strong> Not allowed before or during treatments.<br>
          7. <strong>Health Conditions:</strong> Consult a doctor if needed; LivingWell may refuse service.<br>
          8. <strong>Behavior:</strong> Respectful conduct required; inappropriate behaviour ends session without refund.<br>
          9. <strong>Liability:</strong> LivingWell is not liable for accidents on premises.<br>
          10. <strong>Photography:</strong> Recording not allowed during treatments.<br>
          11. <strong>Cancellations:</strong> Cancel ≥24h before; late arrival reduces session time.<br>
          12. <strong>Payment:</strong> Due at service or within 5 business days.<br>
          13. <strong>Safety:</strong> Notify therapist of discomfort immediately.<br>
          14. <strong>Governing Law:</strong> Belgian law applies; Brussels courts have jurisdiction.
        </p>
      </fieldset>

      <!-- 6. Signature & Marketing -->
      <fieldset>
        <legend>6. Signature & Marketing Consent</legend>
        <label for="signature">Signature</label>
        <input id="signature" name="signature" type="text" placeholder="Sign here">

        <label for="signature_date">Date</label>
        <input id="signature_date" name="signature_date" type="date" max="">

        <div role="radiogroup">
          <label class="inline"><input type="radio" name="marketing" value="Agree"> I agree to receive LivingWell updates</label>
          <label class="inline"><input type="radio" name="marketing" value="Disagree" checked> I do not wish to receive marketing communications</label>
        </div>
      </fieldset>

      <div style="display:flex;gap:12px;align-items:center">
        <button type="submit" id="submitBtn" class="submit-btn">Submit</button>
        <div id="formError" class="error" role="alert" style="display:none"></div>
      </div>
    </form>

    <footer>
      LivingWell Brussels – Chaussée d'Etterbeek 64, 1040 Bruxelles – contact@livingwell.be<br>
      Records retained for 7 years in accordance with GDPR.
    </footer>
  </main>

  <script>
    (function(){
      const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzkq-pAuTJ-Ayc8N1EN2fMvXKTWUAZZER-Fead9SlmU7akQ-sB_28UqkbATBBBa6VjL/exec';

      const form = document.getElementById('clientForm');
      const submitBtn = document.getElementById('submitBtn');
      const confirmation = document.getElementById('confirmation');
      const formError = document.getElementById('formError');

      const today = new Date().toISOString().split('T')[0];
      document.querySelectorAll('input[type="date"]').forEach(inp => inp.max = today);

      function showError(msg){
        formError.textContent = msg;
        formError.style.display = msg ? 'block' : 'none';
      }

      function customValidate(){
        const gdpr = document.getElementById('gdpr_consent');
        if(!gdpr.checked){
          showError('You must consent to the processing of personal data.');
          return false;
        }
        const methods = [...document.querySelectorAll('input[name="contact_method"]')];
        if(!methods.some(c => c.checked)){
          showError('Please select at least one preferred contact method.');
          return false;
        }
        showError('');
        return true;
      }

      function ensureIframe(){
        let iframe = document.getElementById('submission_iframe');
        if(!iframe){
          iframe = document.createElement('iframe');
          iframe.style.display = 'none';
          iframe.id = 'submission_iframe';
          iframe.name = 'submission_iframe';
          document.body.appendChild(iframe);
        }
        return iframe;
      }

      function fallbackSubmit(){
        ensureIframe();
        form.target = 'submission_iframe';
        form.submit();
        confirmation.style.display = 'block';
        confirmation.textContent = 'Form submitted (fallback mode).';
        form.reset();
        setTimeout(()=> confirmation.style.display='none',8000);
        form.removeAttribute('target');
      }

      form.addEventListener('submit', function(e){
        e.preventDefault();
        if(!form.checkValidity()){form.reportValidity();return;}
        if(!customValidate()) return;

        submitBtn.disabled = true;
        submitBtn.textContent = 'Sending…';

        const formData = new FormData(form);

        fetch(WEB_APP_URL,{method:'POST',body:formData})
        .then(res => {
          if(!res.ok) throw new Error('Server error');
          const ct=res.headers.get('content-type')||'';
          return ct.includes('json') ? res.json() : {status:'success'};
        })
        .then(json=>{
          if(json.status==='success'){
            confirmation.style.display='block';
            confirmation.textContent='Thank you — your form was submitted.';
            form.reset();
            setTimeout(()=>confirmation.style.display='none',8000);
          } else {
            throw new Error(json.message||'Unexpected response');
          }
        })
        .catch(()=> fallbackSubmit())
        .finally(()=>{
          submitBtn.disabled=false;
          submitBtn.textContent='Submit';
        });
      });
    })();
  </script>
</body>
</html>
